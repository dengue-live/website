<!DOCTYPE html>
<html style="height: 100%;">
<head>
    <meta name="viewport" content="width=device-width" />
    <title>@ViewData["Title"] | dengue.live</title>
    <!--Bootstrap CSS, JavaScript/JQuery files -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap" rel="stylesheet">
</head>
<body>
    <!--navbar-->
    @await Html.PartialAsync("navbar.cshtml")
    <style>
        #chatBtn {
            position:fixed;
	        width:65px;
	        height:65px;
	        bottom:25px;
	        right:25px;
	        background-color: #85CEBB;
	        border-radius: 50px;
	        text-align:center;
            border: none;
            -webkit-box-shadow: 5px 5px 10px 5px rgba(0,0,0,0.2); 
            box-shadow: 5px 5px 10px 5px rgba(0,0,0,0.2);
            transition: background-color ease-out 0.4s;
            outline: none;
        }

        #chatBtn:hover {
            background-color: #72b3a2;
        }

        #chatWindow {
            display: none;
            border-radius: 10px;
            position:fixed;
	        bottom:100px;
	        right:20px;
            -webkit-box-shadow: 5px 5px 10px 5px rgba(0,0,0,0.2); 
            box-shadow: 5px 5px 10px 5px rgba(0,0,0,0.2);
            width: 300px;
        }
    </style>

    <main>
        @RenderBody()
        <button id="chatBtn" onclick="openChat()">
            <svg class="bi bi-chat" width="2em" height="2em" viewBox="0 0 20 20" fill="white" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M8.207 13.293L7.5 14a5.5 5.5 0 110-11h5a5.5 5.5 0 110 11s-1.807 2.169-4.193 2.818C7.887 16.933 7.449 17 7 17c.291-.389.488-.74.617-1.052C8.149 14.649 7.5 14 7.5 14c.707-.707.708-.707.708-.706h.001l.002.003.004.004.01.01a1.184 1.184 0 01.074.084c.039.047.085.108.134.183.097.15.206.36.284.626.114.386.154.855.047 1.394.717-.313 1.37-.765 1.895-1.201a10.266 10.266 0 001.013-.969l.05-.056.01-.012m0 0A1 1 0 0112.5 13a4.5 4.5 0 100-9h-5a4.5 4.5 0 000 9 1 1 0 01.707.293" clip-rule="evenodd"></path>
            </svg>
        </button>
        <iframe id="chatWindow" width="340" height="500" allow="microphone;" src="https://console.dialogflow.com/api-client/demo/embedded/ffa042e8-e83d-4c83-ab7f-df2e018f2600"></iframe>
    </main>

    <script>
        function openChat() {
            if (document.querySelector("#chatWindow").style.display == "initial") {
                document.querySelector("#chatWindow").style.display = "none";
            }
            else {
                document.querySelector("#chatWindow").style.display = "initial";
            }
        }
    </script>

    @if (ViewData["Title"] != "Dashboard")
    {
        <style>
            @@media screen and (max-width: 640px) {
                footer h5 {
                    font-size: 1em;
                }

                footer a {
                    padding: 5px !important;
                }

                .footerSection {
                    padding: 20px;
                }

                footer center {
                    font-size: 0.8em;
                }
            }
        </style>


        @model Dengue.Models.EmailRecord
        <footer style="height: auto; background-color: #eee; font-size: 1em;">
            <div style="display: flex; justify-content:center; margin: 20px auto; padding: 40px 0;">
                <div class="footerSection" style="display: flex; flex-flow: column; padding: 20px 50px 20px 20px; width: 300px; text-align: right; border-right: 1px lightgrey solid;">
                    <h5 style="font-family: 'Montserrat'; font-weight: 700;">Navigation</h5>
                    <a class="text-decoration-none text-secondary" href="../">Home</a>
                    <a class="text-decoration-none text-secondary" href="~/about">About</a>
                    <a class="text-decoration-none text-secondary" href="~/prevention">Prevention</a>
                    <a class="text-decoration-none text-secondary" href="~/risk">Risk Factors</a>
                    <a class="text-decoration-none text-secondary" href="~/dashboard">Predictions</a>
                </div>
                <div class="footerSection" style="padding: 20px 20px 20px 50px; width: 300px;">
                    <h5 style="font-weight: 700;">Sign up for our Early Warning System</h5>
                    <a href="#" style="font-weight:600;" data-toggle="modal" data-target="#ewsModal" class="btn btn-outline-info">Sign Up</a>
                </div>
            </div>
            <center style="color: grey; vertical-align: bottom;">dengue.live 2020 &nbsp&nbsp Email: <a href="mailto:contact@dengue.live" class="text-decoration-none text-secondary">contact@dengue.live</a></center>
        </footer>
    }
    <div class="modal fade" id="ewsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel" style="color: grey; font-size: 0.8em;"><span style="color:#85CEBB; font-family: 'Montserrat', sans-serif;">dengue.live</span> | EARLY WARNING SYSTEM</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>
                        Receive an email notification when your area is at risk of a dengue outbreak.
                    </p>

                    <form asp-action="SignUp" method="post">
                        <div class="form-group">
                            <label for="selectLocation" class="col-form-label">Location:</label>
                            <select asp-for="Location" class="selectpicker form-control" data-live-search="true" id="selectLocation" required>
                                <optgroup label="Select closest location">
                                    @{
                                        string[] stationList = { "Upper Thomson", "Clementi", "Buangkok", "Sentosa Island", "Chai Chee", "Boon Lay (West)", "Bukit Panjang", "Kranji Reservoir", "Upper Peirce Reservoir", "Kent Ridge", "Queenstown", "Tanjong Katong", "Somerset (Road)", "Punggol", "Tuas West", "Simei", "Boon Lay (East)", "Toa Payoh", "Tuas", "Bukit Timah", "Yishun", "Buona Vista", "Pasir Ris (Central)", "Jurong (North)", "Semakau Island", "Admiralty", "Admiralty West", "Pulau Ubin", "East Coast Parkway", "Marina Barrage", "Ang Mo Kio", "Serangoon North", "Newton", "Lim Chu Kang", "Marine Parade", "Choa Chu Kang (Central)", "Tuas South", "Pasir Panjang", "Jurong Island", "Dhoby Ghaut", "Nicoll Highway", "Botanic Garden", "Choa Chu Kang (South)", "Khatib" };
                                        foreach (String location in stationList)
                                        {
                                            <option value="@location">@location</option>
                                        }
                                    }
                                </optgroup>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="name" class="col-form-label">Name:</label>
                            <input asp-for="Name" type="text" class="form-control" id="name" required>
                        </div>
                        <div class="form-group">
                            <label for="email" class="col-form-label">Email:</label>
                            <input asp-for="Email" type="email" class="form-control" id="email" required>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="submit" class="btn btn-primary">Confirm</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    @Html.Raw(TempData["msg"])
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>
</body>
</html>
